patch:
  "menu/page_size": 9
  "punctuator/punctuator/full_shape":
    "\\": "、"
  "punctuator/punctuator/half_shape":
    "\\": "、"
  "key_binder/bindings/+":
    - {accept: "Control+Shift+F", toggle: simplification, when: always}
    - {accept: "Shift+space", toggle: full_shape, when: always}
    - {accept: "Control+period", toggle: ascii_punct, when: always}
    - {accept: minus, send: Page_Up, when: has_menu}
    - {accept: equal, send: Page_Down, when: has_menu}
  
  "engine/translators":
    - lua_translator@*date_translator
    - lua_translator@*lunar
    - lua_translator@*unicode
    - lua_translator@*number_translator
    - lua_translator@*calculator
    - punct_translator
    # - table_translator@custom_phrase
    - table_translator@custom_phrase_3_code
    - table_translator@custom_phrase_kf
    - table_translator@custom_phrase_mqzg
    - table_translator@custom_phrase_super_1jian
    - table_translator@custom_phrase_super_2jian
    - table_translator@custom_phrase_super_3jian
    - table_translator@custom_phrase_super_3jian_no_conflict
    - table_translator@custom_phrase_super_4jian_no_conflict
    - table_translator@big_char_set
    # - table_translator@emojis           # 禁用 ae Emoji
    - table_translator@easy_en_simp       # 保留 aw 英语
    - table_translator@jp_sela            # 保留 aj 日语
    # - reverse_lookup_translator         # 禁用反查
    # - table_translator@reverse_moqima   # 禁用 amq 墨奇反查
    # - table_translator@radical_flypy    # 禁用 az 部件组字
    # - table_translator@reverse_stroke   # 禁用 ab 笔画反查
    # - table_translator@reverse_zrlf     # 禁用 alf 自然两分
    # - table_translator@reverse_cj       # 禁用 arj 仓颉
    - script_translator
    - script_translator@user_dict_set
    # - script_translator@add_user_dict   # 禁用 ac 自造词

  # ========== 18键模糊输入规则 ==========
  # 键盘布局：
  # 第一行：Q(独立), WE, RT, Y(独立), U(独立), IO, P(独立)
  # 第二行：A(独立), SD, FG, H(独立), JK, L(独立)
  # 第三行：Z(独立), XC, V(独立), BN, M(独立)
  #
  # 模糊规则：双向派生，点击或滑动任一字母都可匹配两个字母的词
  # 注意：由于 Rime 架构限制，无法区分点击和滑动输入，精确输入会继续出现模糊候选
  
  "speller/algebra/+":
    # === 第一行 ===
    # WE 共键：W 和 E 互相模糊
    - derive/^w/e/      # 输入 e 可匹配 w 开头的词
    - derive/w$/e/      # 输入 e 可匹配 w 结尾的词
    - derive/^e/w/      # 输入 w 可匹配 e 开头的词
    - derive/e$/w/      # 输入 w 可匹配 e 结尾的词
    
    # RT 共键：R 和 T 互相模糊
    - derive/^r/t/
    - derive/r$/t/
    - derive/^t/r/
    - derive/t$/r/
    
    # IO 共键：I 和 O 互相模糊
    - derive/^i/o/
    - derive/i$/o/
    - derive/^o/i/
    - derive/o$/i/
    
    # === 第二行 ===
    # SD 共键：S 和 D 互相模糊
    - derive/^s/d/
    - derive/s$/d/
    - derive/^d/s/
    - derive/d$/s/
    
    # FG 共键：F 和 G 互相模糊
    - derive/^f/g/
    - derive/f$/g/
    - derive/^g/f/
    - derive/g$/f/
    
    # JK 共键：J 和 K 互相模糊
    - derive/^j/k/
    - derive/j$/k/
    - derive/^k/j/
    - derive/k$/j/
    
    # === 第三行 ===
    # XC 共键：X 和 C 互相模糊
    - derive/^x/c/
    - derive/x$/c/
    - derive/^c/x/
    - derive/c$/x/
    
    # BN 共键：B 和 N 互相模糊
    - derive/^b/n/
    - derive/b$/n/
    - derive/^n/b/
    - derive/n$/b/

  # ========== 禁用除 aj(日语) aw(英语) 外的特殊前缀 ==========
  # 只保留 aj 和 aw 的 recognizer patterns，移除其他
  "recognizer/patterns/reverse_moqima":  # 禁用 amq 墨奇反查
  "recognizer/patterns/radical_flypy":   # 禁用 az 部件组字
  "recognizer/patterns/reverse_stroke":  # 禁用 ab 笔画反查
  "recognizer/patterns/reverse_cj":      # 禁用 arj 仓颉反查
  "recognizer/patterns/reverse_zrlf":    # 禁用 alf 自然两分
  "recognizer/patterns/add_user_dict":   # 禁用 ac 自造词
  "recognizer/patterns/emojis":          # 禁用 ae Emoji

  # 移除相关的 segmentors
  "engine/segmentors":
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    # 保留 aj 和 aw 相关
    - affix_segmentor@easy_en_simp
    - affix_segmentor@jp_sela
    - fallback_segmentor
